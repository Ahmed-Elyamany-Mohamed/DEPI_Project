<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8 col-lg-5">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <h1 class="h4 mb-3 text-center">Sign in</h1>

          <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label">Email address</label>
              <input
                id="email"
                type="email"
                class="form-control"
                formControlName="email"
                [class.is-invalid]="f['email'].touched && f['email'].invalid"
                placeholder="you@example.com"
                autocomplete="username"
              />
              <div
                class="invalid-feedback"
                *ngIf="f['email'].touched && f['email'].errors?.['required']"
              >
                Email is required.
              </div>
              <div
                class="invalid-feedback"
                *ngIf="f['email'].touched && f['email'].errors?.['email']"
              >
                Enter a valid email.
              </div>
            </div>

            <!-- Password -->
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <input
                  id="password"
                  [type]="showPassword() ? 'text' : 'password'"
                  class="form-control"
                  formControlName="password"
                  [class.is-invalid]="
                    f['password'].touched && f['password'].invalid
                  "
                  placeholder="••••••••"
                  autocomplete="current-password"
                />
                <button
                  type="button"
                  class="btn btn-outline-secondary"
                  (click)="showPassword.set(!showPassword())"
                  aria-label="Toggle password visibility"
                >
                  {{ showPassword() ? "Hide" : "Show" }}
                </button>
                <div
                  class="invalid-feedback d-block"
                  *ngIf="f['password'].touched && f['password'].errors?.['required']"
                >
                  Password is required.
                </div>
                <div
                  class="invalid-feedback d-block"
                  *ngIf="f['password'].touched && f['password'].errors?.['minlength']"
                >
                  Password must be at least 6 characters.
                </div>
              </div>
            </div>

            <!-- Remember me & forgot -->
            <div class="d-flex justify-content-between align-items-center mb-3">
              <div class="form-check">
                <input
                  id="remember"
                  type="checkbox"
                  class="form-check-input"
                  formControlName="remember"
                />
                <label for="remember" class="form-check-label"
                  >Remember me</label
                >
              </div>
              <a href="#" class="small text-decoration-none"
                >Forgot password?</a
              >
            </div>

            <!-- Server error -->
            <div class="alert alert-danger py-2" *ngIf="serverError()">
              {{ serverError() }}
            </div>

            <!-- Submit -->
            <button
              type="submit"
              class="btn btn-primary w-100"
              [disabled]="loading()"
            >
              <span *ngIf="!loading()">Sign in</span>
              <span
                *ngIf="loading()"
                class="d-inline-flex align-items-center gap-2"
              >
                <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                ></span>
                Signing in...
              </span>
            </button>
          </form>

          <!-- Divider -->
          <div class="text-center text-muted my-3">or</div>

          <!-- Social (optional) -->
          <button
            type="button"
            class="btn btn-outline-secondary w-100"
            disabled
          >
            Continue with Google (stub)
          </button>
        </div>
      </div>

      <p class="text-center mt-3 mb-0">
        Don’t have an account?
        <a href="#" class="text-decoration-none">Create one</a>
      </p>
    </div>
  </div>
</div>
